<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>–¢–µ–Ω–∏ –°–æ–∑–Ω–∞–Ω–∏—è | –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –∏–≥—Ä–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #000;
            color: #e0e0e0;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            position: fixed;
            touch-action: manipulation;
        }

        /* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #0a0a0a, #1a1a2e, #16213e, #0a0a0a);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            z-index: -1;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* –ß–∞—Å—Ç–∏—Ü—ã —Å—Ç—Ä–∞—Ö–∞ */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: rgba(255, 0, 102, 0.5);
            border-radius: 50%;
            animation: float 10s infinite;
        }

        @keyframes float {
            0%, 100% { 
                transform: translateY(0) translateX(0);
                opacity: 0;
            }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { 
                transform: translateY(-100vh) translateX(50px);
                opacity: 0;
            }
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–≥—Ä—ã */
        #game-container {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            z-index: 10;
        }

        /* –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ */
        #top-bar {
            display: flex;
            justify-content: space-between;
            padding: 10px 15px;
            background: rgba(0, 0, 0, 0.9);
            border-bottom: 2px solid #ff0066;
            flex-wrap: wrap;
            gap: 10px;
        }

        .stat-box {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(26, 26, 46, 0.8);
            padding: 8px 15px;
            border-radius: 20px;
            border: 1px solid #444;
            font-size: 0.9em;
            flex: 1;
            min-width: 100px;
            justify-content: center;
        }

        .stat-icon {
            font-size: 1.2em;
        }

        .stat-value {
            font-weight: bold;
            color: #00ff88;
        }

        /* –®–∫–∞–ª–∞ —Ç—Ä–µ–≤–æ–≥–∏ */
        .anxiety-bar {
            width: 100%;
            height: 8px;
            background: rgba(0, 0, 0, 0.8);
            position: relative;
            overflow: hidden;
        }

        .anxiety-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff88, #ffaa00, #ff0066, #ff0000);
            transition: width 0.5s ease;
            box-shadow: 0 0 10px currentColor;
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        #content {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        /* –≠–∫—Ä–∞–Ω—ã */
        .screen {
            display: none;
            width: 100%;
            max-width: 600px;
            animation: fadeIn 0.5s ease;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é */
        #menu-screen {
            text-align: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            border: 2px solid #ff0066;
            box-shadow: 0 0 30px rgba(255, 0, 102, 0.3);
        }

        .game-title {
            font-size: clamp(1.8em, 5vw, 3em);
            color: #ff0066;
            text-shadow: 0 0 20px #ff0066;
            margin-bottom: 15px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
        }

        .game-subtitle {
            font-size: clamp(0.9em, 3vw, 1.2em);
            color: #999;
            margin-bottom: 30px;
            font-style: italic;
        }

        .menu-description {
            font-size: clamp(0.8em, 2.5vw, 1em);
            line-height: 1.6;
            margin-bottom: 30px;
            color: #ccc;
            padding: 15px;
            background: rgba(255, 0, 102, 0.1);
            border-radius: 10px;
        }

        /* –ö–Ω–æ–ø–∫–∏ */
        .btn {
            width: 100%;
            padding: 15px 30px;
            font-size: clamp(1em, 3vw, 1.2em);
            background: linear-gradient(135deg, #ff0066, #ff3388);
            border: none;
            border-radius: 10px;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s;
            margin: 10px 0;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 5px 15px rgba(255, 0, 102, 0.4);
            touch-action: manipulation;
        }

        .btn:hover, .btn:active {
            transform: translateY(-2px);
            box-shadow: 0 7px 20px rgba(255, 0, 102, 0.6);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #444, #666);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }

        .btn-secondary:hover, .btn-secondary:active {
            box-shadow: 0 7px 20px rgba(0, 0, 0, 0.6);
        }

        /* –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω */
        #game-screen {
            padding: 20px;
        }

        .level-indicator {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 10px;
            border: 2px solid #00ff88;
        }

        .level-title {
            font-size: clamp(1.2em, 4vw, 1.8em);
            color: #00ff88;
            margin-bottom: 5px;
        }

        .level-subtitle {
            font-size: clamp(0.8em, 2.5vw, 1em);
            color: #999;
        }

        /* –°—Ü–µ–Ω–∞—Ä–∏–π */
        .scenario-box {
            background: rgba(0, 0, 0, 0.9);
            padding: 25px;
            border-radius: 15px;
            border-left: 5px solid #ff0066;
            margin-bottom: 25px;
            min-height: 150px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
        }

        .scenario-text {
            font-size: clamp(1em, 3vw, 1.2em);
            line-height: 1.8;
            color: #e0e0e0;
            animation: typeIn 1s ease;
        }

        @keyframes typeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* –í—ã–±–æ—Ä—ã */
        .choices {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .choice {
            padding: 18px;
            background: rgba(30, 30, 30, 0.9);
            border: 2px solid #555;
            border-radius: 12px;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
            font-size: clamp(0.9em, 2.5vw, 1.1em);
            position: relative;
            overflow: hidden;
            touch-action: manipulation;
        }

        .choice::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }

        .choice:hover::before, .choice:active::before {
            left: 100%;
        }

        .choice:hover, .choice:active {
            background: rgba(50, 50, 50, 0.9);
            border-color: #00ff88;
            transform: translateX(5px);
        }

        .choice.dangerous:hover, .choice.dangerous:active {
            border-color: #ff0066;
            box-shadow: 0 0 15px rgba(255, 0, 102, 0.5);
        }

        .choice.safe {
            border-color: #00ff88;
        }

        .choice-icon {
            margin-right: 10px;
            font-size: 1.2em;
        }

        .choice-info {
            display: block;
            font-size: 0.8em;
            color: #999;
            margin-top: 5px;
        }

        /* –†–µ–∑—É–ª—å—Ç–∞—Ç—ã */
        #result-screen {
            text-align: center;
            padding: 30px 20px;
            background: rgba(0, 0, 0, 0.9);
            border-radius: 15px;
        }

        .result-title {
            font-size: clamp(1.5em, 5vw, 2.5em);
            margin-bottom: 20px;
            color: #ff0066;
            text-shadow: 0 0 20px #ff0066;
        }

        .result-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }

        .result-stat {
            padding: 20px;
            background: rgba(26, 26, 46, 0.8);
            border-radius: 10px;
            border: 2px solid #444;
        }

        .result-stat-value {
            font-size: clamp(1.8em, 5vw, 2.5em);
            font-weight: bold;
            color: #00ff88;
            margin-bottom: 5px;
        }

        .result-stat-label {
            font-size: clamp(0.8em, 2.5vw, 1em);
            color: #999;
        }

        .result-message {
            font-size: clamp(1em, 3vw, 1.3em);
            line-height: 1.8;
            margin: 25px 0;
            padding: 20px;
            background: rgba(255, 0, 102, 0.1);
            border-radius: 10px;
            border: 1px solid #ff0066;
        }

        /* –≠—Ñ—Ñ–µ–∫—Ç —Ç—Ä—è—Å–∫–∏ */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
            20%, 40%, 60%, 80% { transform: translateX(10px); }
        }

        .shake {
            animation: shake 0.5s;
        }

        /* –≠—Ñ—Ñ–µ–∫—Ç –∑–∞—Ç–µ–º–Ω–µ–Ω–∏—è */
        .darken {
            animation: darken 0.3s ease;
        }

        @keyframes darken {
            0% { filter: brightness(1); }
            50% { filter: brightness(0.3); }
            100% { filter: brightness(1); }
        }

        /* –ú–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è */
        @media (max-width: 768px) {
            #top-bar {
                padding: 8px 10px;
            }

            .stat-box {
                padding: 6px 10px;
                font-size: 0.8em;
                min-width: 80px;
            }

            #content {
                padding: 15px;
            }

            .scenario-box {
                padding: 18px;
                min-height: 120px;
            }

            .choice {
                padding: 15px;
            }
        }

        @media (max-width: 480px) {
            .stat-box {
                flex: 1 1 calc(50% - 10px);
            }
        }

        /* –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è */
        .achievement-popup {
            position: fixed;
            top: 80px;
            right: -350px;
            background: rgba(0, 0, 0, 0.95);
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #00ff88;
            z-index: 1000;
            transition: right 0.5s ease;
            max-width: 300px;
        }

        .achievement-popup.show {
            right: 20px;
        }

        .achievement-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .achievement-title {
            color: #00ff88;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .achievement-text {
            font-size: 0.9em;
            color: #ccc;
        }

        /* –ü—Ä–æ–≥—Ä–µ—Å—Å —É—Ä–æ–≤–Ω—è */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 10px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff0066, #00ff88);
            transition: width 0.5s ease;
            box-shadow: 0 0 10px currentColor;
        }
    </style>
</head>
<body>
    <div class="animated-bg"></div>
    <div class="particles" id="particles"></div>
    
    <div id="game-container">
        <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
        <div id="top-bar">
            <div class="stat-box">
                <span class="stat-icon">üéØ</span>
                <span>–£—Ä–æ–≤–µ–Ω—å: <span class="stat-value" id="current-level">1</span></span>
            </div>
            <div class="stat-box">
                <span class="stat-icon">‚≠ê</span>
                <span>–ë–∞–ª–ª—ã: <span class="stat-value" id="score">0</span></span>
            </div>
            <div class="stat-box">
                <span class="stat-icon">üíé</span>
                <span>–†–µ—à–µ–Ω–∏–π: <span class="stat-value" id="decisions">0</span></span>
            </div>
        </div>
        
        <!-- –®–∫–∞–ª–∞ —Ç—Ä–µ–≤–æ–≥–∏ -->
        <div class="anxiety-bar">
            <div class="anxiety-fill" id="anxiety-fill" style="width: 0%"></div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <div id="content">
            <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
            <div id="menu-screen" class="screen active">
                <h1 class="game-title">üé≠ –¢–ï–ù–ò –°–û–ó–ù–ê–ù–ò–Ø</h1>
                <p class="game-subtitle">–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ç—Ä–∏–ª–ª–µ—Ä</p>
                <div class="menu-description">
                    –ü–æ–≥—Ä—É–∑–∏—Ç–µ—Å—å –≤ –º–∏—Ä –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å—Ç—Ä–∞—Ö–æ–≤ –∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π. 
                    –ö–∞–∂–¥–æ–µ —Ä–µ—à–µ–Ω–∏–µ –∏–º–µ–µ—Ç –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è. –ö–∞–∂–¥—ã–π –≤—ã–±–æ—Ä –º–µ–Ω—è–µ—Ç –≤–∞—Å.
                    –°–º–æ–∂–µ—Ç–µ –ª–∏ –≤—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞—Å—Å—É–¥–æ–∫ –≤ –ª–∞–±–∏—Ä–∏–Ω—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ä–∞–∑—É–º–∞?
                </div>
                <button class="btn" onclick="game.startGame()">
                    üéÆ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
                </button>
                <button class="btn btn-secondary" onclick="game.showRules()">
                    üìñ –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã
                </button>
                <button class="btn btn-secondary" onclick="game.showStats()">
                    üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                </button>
            </div>

            <!-- –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω -->
            <div id="game-screen" class="screen">
                <div class="level-indicator">
                    <div class="level-title" id="level-title">–£—Ä–æ–≤–µ–Ω—å 1</div>
                    <div class="level-subtitle" id="level-subtitle">–ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                    </div>
                </div>

                <div class="scenario-box">
                    <div class="scenario-text" id="scenario-text">
                        –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è...
                    </div>
                </div>

                <div class="choices" id="choices">
                    <!-- –í—ã–±–æ—Ä—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>

            <!-- –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
            <div id="result-screen" class="screen">
                <h2 class="result-title" id="result-title">–ö–æ–Ω–µ—Ü –∏–≥—Ä—ã</h2>
                
                <div class="result-stats">
                    <div class="result-stat">
                        <div class="result-stat-value" id="final-score">0</div>
                        <div class="result-stat-label">–ë–∞–ª–ª–æ–≤</div>
                    </div>
                    <div class="result-stat">
                        <div class="result-stat-value" id="final-level">0</div>
                        <div class="result-stat-label">–£—Ä–æ–≤–Ω–µ–π</div>
                    </div>
                    <div class="result-stat">
                        <div class="result-stat-value" id="final-decisions">0</div>
                        <div class="result-stat-label">–†–µ—à–µ–Ω–∏–π</div>
                    </div>
                    <div class="result-stat">
                        <div class="result-stat-value" id="final-anxiety">0%</div>
                        <div class="result-stat-label">–¢—Ä–µ–≤–æ–≥–∏</div>
                    </div>
                </div>

                <div class="result-message" id="result-message">
                    –í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç...
                </div>

                <button class="btn" onclick="game.restartGame()">
                    üîÑ –ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞
                </button>
                <button class="btn btn-secondary" onclick="game.backToMenu()">
                    üè† –í –º–µ–Ω—é
                </button>
            </div>
        </div>
    </div>

    <!-- –í—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π -->
    <div class="achievement-popup" id="achievement-popup">
        <div class="achievement-icon" id="achievement-icon">üèÜ</div>
        <div class="achievement-title" id="achievement-title">–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ!</div>
        <div class="achievement-text" id="achievement-text"></div>
    </div>

    <script>
        // –ì–ª–∞–≤–Ω—ã–π –æ–±—ä–µ–∫—Ç –∏–≥—Ä—ã
        const game = {
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
            state: {
                currentLevel: 1,
                score: 0,
                anxiety: 0,
                decisions: 0,
                currentScenarioIndex: 0,
                gameActive: false,
                maxLevels: 10
            },

            // –ë–∞–∑–∞ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (–ò–°–ü–†–ê–í–õ–ï–ù–û: —Å–Ω–∏–∂–µ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—è —Ç—Ä–µ–≤–æ–≥–∏)
            scenarios: [
                // –£—Ä–æ–≤–µ–Ω—å 1: –ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ
                {
                    level: 1,
                    title: "–ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ",
                    subtitle: "–¢—É–º–∞–Ω–Ω–æ–µ —É—Ç—Ä–æ",
                    text: "–í—ã –ø—Ä–æ—Å—ã–ø–∞–µ—Ç–µ—Å—å –≤ –Ω–µ–∑–Ω–∞–∫–æ–º–æ–π –∫–æ–º–Ω–∞—Ç–µ. –°—Ç–µ–Ω—ã –ø–æ–∫—Ä—ã—Ç—ã —Å—Ç—Ä–∞–Ω–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏. –ó–∞ –æ–∫–Ω–æ–º –≥—É—Å—Ç–æ–π —Ç—É–º–∞–Ω. –¢–µ–ª–µ—Ñ–æ–Ω –Ω–∞ —Å—Ç–æ–ª–µ –º–∏–≥–∞–µ—Ç —Ç—Ä–µ–≤–æ–∂–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏. –ß—Ç–æ –≤—ã —Å–¥–µ–ª–∞–µ—Ç–µ?",
                    choices: [
                        { text: "üì± –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è", anxiety: 3, score: 10, icon: "üì±", type: "safe" },
                        { text: "üö™ –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –≤—ã–π—Ç–∏ –∏–∑ –∫–æ–º–Ω–∞—Ç—ã", anxiety: 8, score: 15, icon: "üö™", dangerous: true },
                        { text: "üîç –ò–∑—É—á–∏—Ç—å —Å–∏–º–≤–æ–ª—ã –Ω–∞ —Å—Ç–µ–Ω–∞—Ö", anxiety: 2, score: 20, icon: "üîç", type: "safe" },
                        { text: "ü™ü –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ –æ–∫–Ω–æ", anxiety: 5, score: 15, icon: "ü™ü" }
                    ]
                },
                // –£—Ä–æ–≤–µ–Ω—å 2: –ö–æ—Ä–∏–¥–æ—Ä —Ç–µ–Ω–µ–π
                {
                    level: 2,
                    title: "–ö–æ—Ä–∏–¥–æ—Ä —Ç–µ–Ω–µ–π",
                    subtitle: "–¢–µ–Ω–∏ –Ω–∞ —Å—Ç–µ–Ω–∞—Ö",
                    text: "–í—ã –æ–∫–∞–∑—ã–≤–∞–µ—Ç–µ—Å—å –≤ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–º –∫–æ—Ä–∏–¥–æ—Ä–µ. –ù–∞ —Å—Ç–µ–Ω–∞—Ö –ø–ª—è—à—É—Ç —Å—Ç—Ä–∞–Ω–Ω—ã–µ —Ç–µ–Ω–∏, —Ö–æ—Ç—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Å–≤–µ—Ç–∞ –Ω–µ –≤–∏–¥–Ω–æ. –°–ª—ã—à–Ω—ã —à–∞–≥–∏... –∏–ª–∏ —ç—Ç–æ —ç—Ö–æ –≤–∞—à–∏—Ö —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö?",
                    choices: [
                        { text: "üèÉ –ü–æ–±–µ–∂–∞—Ç—å –≤–ø–µ—Ä—ë–¥", anxiety: 10, score: 15, icon: "üèÉ", dangerous: true },
                        { text: "üïØÔ∏è –ó–∞–∂–µ—á—å —Å–ø–∏—á–∫—É", anxiety: 4, score: 25, icon: "üïØÔ∏è", type: "safe" },
                        { text: "üëÇ –ü—Ä–∏—Å–ª—É—à–∞—Ç—å—Å—è –∫ –∑–≤—É–∫–∞–º", anxiety: 5, score: 20, icon: "üëÇ", type: "safe" },
                        { text: "ü§ö –ö–æ—Å–Ω—É—Ç—å—Å—è —Ç–µ–Ω–∏", anxiety: 12, score: 30, icon: "ü§ö", dangerous: true }
                    ]
                },
                // –£—Ä–æ–≤–µ–Ω—å 3: –ó–µ—Ä–∫–∞–ª—å–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞
                {
                    level: 3,
                    title: "–ó–µ—Ä–∫–∞–ª—å–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞",
                    subtitle: "–ú–Ω–æ–∂–µ—Å—Ç–≤–æ –æ—Ç—Ä–∞–∂–µ–Ω–∏–π",
                    text: "–ö–æ–º–Ω–∞—Ç–∞ –ø–æ–ª–Ω–∞ –∑–µ—Ä–∫–∞–ª. –í–∞—à–µ –æ—Ç—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–Ω–æ —É–ª—ã–±–∞–µ—Ç—Å—è, —Ö–æ—Ç—è –≤—ã —ç—Ç–æ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç–µ. –û–¥–Ω–æ –∏–∑ –æ—Ç—Ä–∞–∂–µ–Ω–∏–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥—Ä—É–≥–æ–µ –º–µ—Å—Ç–æ...",
                    choices: [
                        { text: "üëÅÔ∏è –°–º–æ—Ç—Ä–µ—Ç—å –≤ —Å–≤–æ—ë –æ—Ç—Ä–∞–∂–µ–Ω–∏–µ", anxiety: 7, score: 20, icon: "üëÅÔ∏è" },
                        { text: "üî® –†–∞–∑–±–∏—Ç—å –±–ª–∏–∂–∞–π—à–µ–µ –∑–µ—Ä–∫–∞–ª–æ", anxiety: 15, score: 35, icon: "üî®", dangerous: true },
                        { text: "üö∂ –ò–¥—Ç–∏ –∫ —Å—Ç—Ä–∞–Ω–Ω–æ–º—É –æ—Ç—Ä–∞–∂–µ–Ω–∏—é", anxiety: 9, score: 30, icon: "üö∂" },
                        { text: "üôà –ó–∞–∫—Ä—ã—Ç—å –≥–ª–∞–∑–∞ –∏ –∏–¥—Ç–∏ –Ω–∞–æ—â—É–ø—å", anxiety: 13, score: 40, icon: "üôà", dangerous: true }
                    ]
                },
                // –£—Ä–æ–≤–µ–Ω—å 4: –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∑–∞–±—ã—Ç—ã—Ö —Å–ª–æ–≤
                {
                    level: 4,
                    title: "–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞",
                    subtitle: "–ö–Ω–∏–≥–∏ –±–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏–π",
                    text: "–í—ã –≤ –æ–≥—Ä–æ–º–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ. –ö–Ω–∏–≥–∏ –Ω–∞–ø–∏—Å–∞–Ω—ã –Ω–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–º —è–∑—ã–∫–µ. –û–¥–Ω–∞ –∫–Ω–∏–≥–∞ —Å–≤–µ—Ç–∏—Ç—Å—è –≤ —Ç–µ–º–Ω–æ—Ç–µ. –ù–∞ —Å—Ç–æ–ª–µ –ª–µ–∂–∏—Ç –ø–∏—Å—å–º–æ —Å –≤–∞—à–∏–º –∏–º–µ–Ω–µ–º...",
                    choices: [
                        { text: "üìñ –û—Ç–∫—Ä—ã—Ç—å —Å–≤–µ—Ç—è—â—É—é—Å—è –∫–Ω–∏–≥—É", anxiety: 11, score: 35, icon: "üìñ", dangerous: true },
                        { text: "‚úâÔ∏è –ü—Ä–æ—á–∏—Ç–∞—Ç—å –ø–∏—Å—å–º–æ", anxiety: 6, score: 25, icon: "‚úâÔ∏è", type: "safe" },
                        { text: "üî¶ –ò—Å–∫–∞—Ç—å –≤—ã—Ö–æ–¥ —Å —Ñ–æ–Ω–∞—Ä—ë–º", anxiety: 8, score: 30, icon: "üî¶" },
                        { text: "ü™ë –°–µ—Å—Ç—å –∏ –ø–æ–¥–æ–∂–¥–∞—Ç—å", anxiety: 3, score: 20, icon: "ü™ë", type: "safe" }
                    ]
                },
                // –£—Ä–æ–≤–µ–Ω—å 5: –õ–µ—Å—Ç–Ω–∏—Ü–∞ —Ä–µ—à–µ–Ω–∏–π
                {
                    level: 5,
                    title: "–õ–µ—Å—Ç–Ω–∏—Ü–∞",
                    subtitle: "–í–≤–µ—Ä—Ö –∏–ª–∏ –≤–Ω–∏–∑?",
                    text: "–ü–µ—Ä–µ–¥ –≤–∞–º–∏ –ª–µ—Å—Ç–Ω–∏—Ü–∞. –í–≤–µ—Ä—Ö –≤–µ–¥—ë—Ç –∫ —Å–≤–µ—Ç—É, –Ω–æ —Å–ª—ã—à–Ω—ã –∫—Ä–∏–∫–∏. –í–Ω–∏–∑ - –∞–±—Å–æ–ª—é—Ç–Ω–∞—è —Ç–µ–º–Ω–æ—Ç–∞ –∏ —Ç–∏—à–∏–Ω–∞. –ü–æ—Å–µ—Ä–µ–¥–∏–Ω–µ –¥–≤–µ—Ä—å —Å –Ω–∞–¥–ø–∏—Å—å—é '–ù–µ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å'.",
                    choices: [
                        { text: "‚¨ÜÔ∏è –ü–æ–¥–Ω—è—Ç—å—Å—è –∫ —Å–≤–µ—Ç—É", anxiety: 9, score: 35, icon: "‚¨ÜÔ∏è" },
                        { text: "‚¨áÔ∏è –°–ø—É—Å—Ç–∏—Ç—å—Å—è –≤ —Ç–µ–º–Ω–æ—Ç—É", anxiety: 14, score: 45, icon: "‚¨áÔ∏è", dangerous: true },
                        { text: "üö™ –û—Ç–∫—Ä—ã—Ç—å –∑–∞–ø—Ä–µ—Ç–Ω—É—é –¥–≤–µ—Ä—å", anxiety: 16, score: 55, icon: "üö™", dangerous: true },
                        { text: "üßò –û—Å—Ç–∞—Ç—å—Å—è –Ω–∞ –º–µ—Å—Ç–µ –∏ –º–µ–¥–∏—Ç–∏—Ä–æ–≤–∞—Ç—å", anxiety: -5, score: 30, icon: "üßò", type: "safe" }
                    ]
                },
                // –£—Ä–æ–≤–µ–Ω—å 6: –ö–æ–º–Ω–∞—Ç–∞ –≤—ã–±–æ—Ä–æ–≤
                {
                    level: 6,
                    title: "–í—ã–±–æ—Ä",
                    subtitle: "–¶–µ–Ω–∞ —Ä–µ—à–µ–Ω–∏–π",
                    text: "–í—ã –≤ –∫–æ–º–Ω–∞—Ç–µ —Å —Ç—Ä–µ–º—è –¥–≤–µ—Ä—è–º–∏. –ù–∞–¥ –ø–µ—Ä–≤–æ–π –Ω–∞–ø–∏—Å–∞–Ω–æ '–ò—Å—Ç–∏–Ω–∞', –Ω–∞–¥ –≤—Ç–æ—Ä–æ–π '–õ–æ–∂—å', –Ω–∞–¥ —Ç—Ä–µ—Ç—å–µ–π '–ó–∞–±–≤–µ–Ω–∏–µ'. –ß–µ—Ç–≤—ë—Ä—Ç–∞—è –¥–≤–µ—Ä—å –±–µ–∑ –Ω–∞–¥–ø–∏—Å–∏ –º–µ–¥–ª–µ–Ω–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è...",
                    choices: [
                        { text: "‚ú® –ò—Å—Ç–∏–Ω–∞", anxiety: 10, score: 50, icon: "‚ú®" },
                        { text: "üé≠ –õ–æ–∂—å", anxiety: 8, score: 40, icon: "üé≠" },
                        { text: "üå´Ô∏è –ó–∞–±–≤–µ–Ω–∏–µ", anxiety: 6, score: 35, icon: "üå´Ô∏è", type: "safe" },
                        { text: "‚ùì –í–æ–π—Ç–∏ –≤ –æ—Ç–∫—Ä—ã–≤–∞—é—â—É—é—Å—è –¥–≤–µ—Ä—å", anxiety: 15, score: 60, icon: "‚ùì", dangerous: true }
                    ]
                },
                // –£—Ä–æ–≤–µ–Ω—å 7: –°–∞–¥ –ø–∞–º—è—Ç–∏
                {
                    level: 7,
                    title: "–°–∞–¥ –ø–∞–º—è—Ç–∏",
                    subtitle: "–ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª—å–Ω—ã–º?",
                    text: "–í—ã –≤ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–º —Å–∞–¥—É. –ö–∞–∂–¥—ã–π —Ü–≤–µ—Ç–æ–∫ - —ç—Ç–æ –≤–∞—à–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–µ. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ü–≤–µ—Ç—ã —É–≤—è–¥–∞—é—Ç. –°–∞–¥–æ–≤–Ω–∏–∫ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –≤–∞–º –≤—ã–±—Ä–∞—Ç—å, –∫–∞–∫–∏–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å...",
                    choices: [
                        { text: "üåπ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—á–∞—Å—Ç–ª–∏–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã", anxiety: 5, score: 40, icon: "üåπ", type: "safe" },
                        { text: "ü•Ä –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –±–æ–ª–µ–∑–Ω–µ–Ω–Ω—ã–µ —É—Ä–æ–∫–∏", anxiety: 12, score: 55, icon: "ü•Ä", dangerous: true },
                        { text: "üå∫ –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è", anxiety: 8, score: 50, icon: "üå∫" },
                        { text: "üî• –°–∂–µ—á—å –≤—Å–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è", anxiety: 18, score: 70, icon: "üî•", dangerous: true }
                    ]
                },
                // –£—Ä–æ–≤–µ–Ω—å 8: –ó–∞–ª —ç–º–æ—Ü–∏–π
                {
                    level: 8,
                    title: "–ó–∞–ª —ç–º–æ—Ü–∏–π",
                    subtitle: "–ß—É–≤—Å—Ç–≤–∞ –æ–≤–µ—â–µ—Å—Ç–≤–ª—ë–Ω–Ω—ã–µ",
                    text: "–û–≥—Ä–æ–º–Ω—ã–π –∑–∞–ª, –≥–¥–µ —ç–º–æ—Ü–∏–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–ª–∏—Å—å. –°—Ç—Ä–∞—Ö - —Ç—ë–º–Ω–∞—è —Ç–µ–Ω—å –≤ —É–≥–ª—É. –†–∞–¥–æ—Å—Ç—å - —è—Ä–∫–∏–π —Å–≤–µ—Ç —É –ø–æ—Ç–æ–ª–∫–∞. –ì–Ω–µ–≤ - –∫—Ä–∞—Å–Ω–æ–µ –ø–ª–∞–º—è. –ü–µ—á–∞–ª—å - —Å–∏–Ω–∏–π —Ç—É–º–∞–Ω. –ß—Ç–æ –≤—ã –≤—ã–±–µ—Ä–µ—Ç–µ?",
                    choices: [
                        { text: "üò® –ü—Ä–æ—Ç–∏–≤–æ—Å—Ç–æ—è—Ç—å —Å—Ç—Ä–∞—Ö—É", anxiety: 13, score: 65, icon: "üò®", dangerous: true },
                        { text: "üòä –û–±–Ω—è—Ç—å —Ä–∞–¥–æ—Å—Ç—å", anxiety: 4, score: 45, icon: "üòä", type: "safe" },
                        { text: "üò§ 
    <div id="top-bar">
        <div class="stat-box">
            <span>üéØ –£—Ä–æ–≤–µ–Ω—å: <span class="stat-value" id="current-level">1</span></span>
        </div>
        <div class="stat-box">
            <span>‚≠ê –ë–∞–ª–ª—ã: <span class="stat-value" id="score">0</span></span>
        </div>
        <div class="stat-box">
            <span>üíé –†–µ—à–µ–Ω–∏–π: <span class="stat-value" id="decisions">0</span></span>
        </div>
    </div>
    
    <div class="anxiety-bar">
        <div class="anxiety-fill" id="anxiety-fill" style="width: 0%"></div>
    </div>

    <div id="content">
        <div id="menu-screen" class="screen active">
            <h1 class="game-title">üé≠ –¢–ï–ù–ò –°–û–ó–ù–ê–ù–ò–Ø</h1>
            <p class="game-subtitle">–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ç—Ä–∏–ª–ª–µ—Ä</p>
            <div class="menu-description">
                –ü–æ–≥—Ä—É–∑–∏—Ç–µ—Å—å –≤ –º–∏—Ä –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å—Ç—Ä–∞—Ö–æ–≤ –∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π. 
                –ö–∞–∂–¥–æ–µ —Ä–µ—à–µ–Ω–∏–µ –∏–º–µ–µ—Ç –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è. –ö–∞–∂–¥—ã–π –≤—ã–±–æ—Ä –º–µ–Ω—è–µ—Ç –≤–∞—Å.
                –°–º–æ–∂–µ—Ç–µ –ª–∏ –≤—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞—Å—Å—É–¥–æ–∫?
            </div>
            <button class="btn" onclick="game.startGame()">üéÆ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
            <button class="btn btn-secondary" onclick="game.showRules()">üìñ –ü—Ä–∞–≤–∏–ª–∞</button>
        </div>

        <div id="game-screen" class="screen">
            <div class="level-indicator">
                <div class="level-title" id="level-title">–£—Ä–æ–≤–µ–Ω—å 1</div>
                <div class="level-subtitle" id="level-subtitle">–ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                </div>
            </div>
            <div class="scenario-box">
                <div class="scenario-text" id="scenario-text">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
            <div class="choices" id="choices"></div>
        </div>

        <div id="result-screen" class="screen">
            <h2 class="result-title" id="result-title">–ö–æ–Ω–µ—Ü –∏–≥—Ä—ã</h2>
            <div class="result-stats">
                <div class="result-stat">
                    <div class="result-stat-value" id="final-score">0</div>
                    <div class="result-stat-label">–ë–∞–ª–ª–æ–≤</div>
                </div>
                <div class="result-stat">
                    <div class="result-stat-value" id="final-level">0</div>
                    <div class="result-stat-label">–£—Ä–æ–≤–Ω–µ–π</div>
                </div>
                <div class="result-stat">
                    <div class="result-stat-value" id="final-decisions">0</div>
                    <div class="result-stat-label">–†–µ—à–µ–Ω–∏–π</div>
                </div>
                <div class="result-stat">
                    <div class="result-stat-value" id="final-anxiety">0%</div>
                    <div class="result-stat-label">–¢—Ä–µ–≤–æ–≥–∏</div>
                </div>
            </div>
            <div class="result-message" id="result-message"></div>
            <button class="btn" onclick="game.restartGame()">üîÑ –ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
            <button class="btn btn-secondary" onclick="game.backToMenu()">üè† –í –º–µ–Ω—é</button>
        </div>
    </div>
</div>

<script>
    const game = {
        state: {
            currentLevel: 1,
            score: 0,
            anxiety: 0,
            decisions: 0,
            currentScenarioIndex: 0,
            gameActive: false
        },

        scenarios: [
            {
                level: 1, title: "–ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ", subtitle: "–¢—É–º–∞–Ω–Ω–æ–µ —É—Ç—Ä–æ",
                text: "–í—ã –ø—Ä–æ—Å—ã–ø–∞–µ—Ç–µ—Å—å –≤ –Ω–µ–∑–Ω–∞–∫–æ–º–æ–π –∫–æ–º–Ω–∞—Ç–µ. –°—Ç–µ–Ω—ã –ø–æ–∫—Ä—ã—Ç—ã —Å—Ç—Ä–∞–Ω–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏. –ó–∞ –æ–∫–Ω–æ–º –≥—É—Å—Ç–æ–π —Ç—É–º–∞–Ω. –¢–µ–ª–µ—Ñ–æ–Ω –Ω–∞ —Å—Ç–æ–ª–µ –º–∏–≥–∞–µ—Ç. –ß—Ç–æ –¥–µ–ª–∞—Ç—å?",
                choices: [
                    { text: "üì± –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω", anxiety: 5, score: 15 },
                    { text: "üö™ –í—ã–π—Ç–∏ –∏–∑ –∫–æ–º–Ω–∞—Ç—ã", anxiety: 10, score: 20, dangerous: true },
                    { text: "üîç –ò–∑—É—á–∏—Ç—å —Å–∏–º–≤–æ–ª—ã", anxiety: 3, score: 25, safe: true },
                    { text: "ü™ü –°–º–æ—Ç—Ä–µ—Ç—å –≤ –æ–∫–Ω–æ", anxiety: 7, score: 18 }
                ]
            },
            {
                level: 2, title: "–ö–æ—Ä–∏–¥–æ—Ä", subtitle: "–¢–µ–Ω–∏ –Ω–∞ —Å—Ç–µ–Ω–∞—Ö",
                text: "–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –∫–æ—Ä–∏–¥–æ—Ä. –°—Ç—Ä–∞–Ω–Ω—ã–µ —Ç–µ–Ω–∏ –Ω–∞ —Å—Ç–µ–Ω–∞—Ö –ø–ª—è—à—É—Ç –±–µ–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Å–≤–µ—Ç–∞. –°–ª—ã—à–Ω—ã —à–∞–≥–∏...",
                choices: [
                    { text: "üèÉ –ü–æ–±–µ–∂–∞—Ç—å", anxiety: 12, score: 20, dangerous: true },
                    { text: "üïØÔ∏è –ó–∞–∂–µ—á—å —Å–ø–∏—á–∫—É", anxiety: 6, score: 30, safe: true },
                    { text: "üëÇ –ü—Ä–∏—Å–ª—É—à–∞—Ç—å—Å—è", anxiety: 8, score: 25 },
                    { text: "ü§ö –ö–æ—Å–Ω—É—Ç—å—Å—è —Ç–µ–Ω–∏", anxiety: 15, score: 35, dangerous: true }
                ]
            },
            {
                level: 3, title: "–ó–µ—Ä–∫–∞–ª–∞", subtitle: "–ú–Ω–æ–∂–µ—Å—Ç–≤–æ –æ—Ç—Ä–∞–∂–µ–Ω–∏–π",
                text: "–ö–æ–º–Ω–∞—Ç–∞ –ø–æ–ª–Ω–∞ –∑–µ—Ä–∫–∞–ª. –í–∞—à–µ –æ—Ç—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–Ω–æ —É–ª—ã–±–∞–µ—Ç—Å—è, —Ö–æ—Ç—è –≤—ã —ç—Ç–æ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç–µ...",
                choices: [
                    { text: "üëÅÔ∏è –°–º–æ—Ç—Ä–µ—Ç—å –≤ –≥–ª–∞–∑–∞", anxiety: 10, score: 25 },
                    { text: "üî® –†–∞–∑–±–∏—Ç—å –∑–µ—Ä–∫–∞–ª–æ", anxiety: 18, score: 40, dangerous: true },
                    { text: "üö∂ –ü—Ä–æ–π—Ç–∏ –¥–∞–ª—å—à–µ", anxiety: 7, score: 30, safe: true },
                    { text: "üôà –ó–∞–∫—Ä—ã—Ç—å –≥–ª–∞–∑–∞", anxiety: 14, score: 35 }
                ]
            },
            {
                level: 4, title: "–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞", subtitle: "–ó–∞–±—ã—Ç—ã–µ –∑–Ω–∞–Ω–∏—è",
                text: "–û–≥—Ä–æ–º–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞. –ö–Ω–∏–≥–∏ –Ω–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–º —è–∑—ã–∫–µ. –û–¥–Ω–∞ —Å–≤–µ—Ç–∏—Ç—Å—è –≤ —Ç–µ–º–Ω–æ—Ç–µ...",
                choices: [
                    { text: "üìñ –û—Ç–∫—Ä—ã—Ç—å –∫–Ω–∏–≥—É", anxiety: 13, score: 40, dangerous: true },
                    { text: "‚úâÔ∏è –ü—Ä–æ—á–∏—Ç–∞—Ç—å –ø–∏—Å—å–º–æ", anxiety: 8, score: 30, safe: true },
                    { text: "üî¶ –ò—Å–∫–∞—Ç—å –≤—ã—Ö–æ–¥", anxiety: 10, score: 35 },
                    { text: "ü™ë –ü–æ–¥–æ–∂–¥–∞—Ç—å", anxiety: 5, score: 25, safe: true }
                ]
            },
            {
                level: 5, title: "–õ–µ—Å—Ç–Ω–∏—Ü–∞", subtitle: "–í—ã–±–æ—Ä –ø—É—Ç–∏",
                text: "–õ–µ—Å—Ç–Ω–∏—Ü–∞. –í–≤–µ—Ä—Ö - –∫ —Å–≤–µ—Ç—É –∏ –∫—Ä–∏–∫–∞–º. –í–Ω–∏–∑ - –≤ —Ç–µ–º–Ω–æ—Ç—É –∏ —Ç–∏—à–∏–Ω—É. –ü–æ—Å–µ—Ä–µ–¥–∏–Ω–µ - –∑–∞–ø—Ä–µ—Ç–Ω–∞—è –¥–≤–µ—Ä—å.",
                choices: [
                    { text: "‚¨ÜÔ∏è –í–≤–µ—Ä—Ö –∫ —Å–≤–µ—Ç—É", anxiety: 11, score: 40 },
                    { text: "‚¨áÔ∏è –í–Ω–∏–∑ –≤ —Ç–µ–º–Ω–æ—Ç—É", anxiety: 16, score: 50, dangerous: true },
                    { text: "üö™ –û—Ç–∫—Ä—ã—Ç—å –¥–≤–µ—Ä—å", anxiety: 19, score: 60, dangerous: true },
                    { text: "üßò –ú–µ–¥–∏—Ç–∏—Ä–æ–≤–∞—Ç—å", anxiety: -8, score: 35, safe: true }
                ]
            },
            {
                level: 6, title: "–í—ã–±–æ—Ä", subtitle: "–¢—Ä–∏ –¥–≤–µ—Ä–∏",
                text: "'–ò—Å—Ç–∏–Ω–∞', '–õ–æ–∂—å', '–ó–∞–±–≤–µ–Ω–∏–µ'. –ß–µ—Ç–≤—ë—Ä—Ç–∞—è –¥–≤–µ—Ä—å –±–µ–∑ –Ω–∞–¥–ø–∏—Å–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å–∞–º–∞...",
                choices: [
                    { text: "‚ú® –ò—Å—Ç–∏–Ω–∞", anxiety: 12, score: 55 },
                    { text: "üé≠ –õ–æ–∂—å", anxiety: 10, score: 45 },
                    { text: "üå´Ô∏è –ó–∞–±–≤–µ–Ω–∏–µ", anxiety: 8, score: 40, safe: true },
                    { text: "‚ùì –¢–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –¥–≤–µ—Ä—å", anxiety: 17, score: 65, dangerous: true }
                ]
            },
            {
                level: 7, title: "–°–∞–¥ –ø–∞–º—è—Ç–∏", subtitle: "–í–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è",
                text: "–ü—Ä–µ–∫—Ä–∞—Å–Ω—ã–π —Å–∞–¥. –ö–∞–∂–¥—ã–π —Ü–≤–µ—Ç–æ–∫ - –≤–∞—à–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–µ. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —É–≤—è–¥–∞—é—Ç...",
                choices: [
                    { text: "üåπ –°—á–∞—Å—Ç–ª–∏–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã", anxiety: 6, score: 45, safe: true },
                    { text: "ü•Ä –ë–æ–ª–µ–∑–Ω–µ–Ω–Ω—ã–µ —É—Ä–æ–∫–∏", anxiety: 14, score: 60, dangerous: true },
                    { text: "üå∫ –ù–æ–≤—ã–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è", anxiety: 10, score: 55 },
                    { text: "üî• –°–∂–µ—á—å –≤—Å—ë", anxiety: 20, score: 75, dangerous: true }
                ]
            },
            {
                level: 8, title: "–≠–º–æ—Ü–∏–∏", subtitle: "–ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è —á—É–≤—Å—Ç–≤",
                text: "–ó–∞–ª —ç–º–æ—Ü–∏–π. –°—Ç—Ä–∞—Ö - —Ç–µ–Ω—å, –†–∞–¥–æ—Å—Ç—å - —Å–≤–µ—Ç, –ì–Ω–µ–≤ - –ø–ª–∞–º—è, –ü–µ—á–∞–ª—å - —Ç—É–º–∞–Ω.",
                choices: [
                    { text: "üò® –°—Ç—Ä–∞—Ö", anxiety: 15, score: 70, dangerous: true },
                    { text: "üòä –†–∞–¥–æ—Å—Ç—å", anxiety: 5, score: 50, safe: true },
                    { text: "üò§ –ì–Ω–µ–≤", anxiety: 18, score: 75, dangerous: true },
                    { text: "üò¢ –ü–µ—á–∞–ª—å", anxiety: 12, score: 60 }
                ]
            },
            {
                level: 9, title: "–ü–æ—Å–ª–µ–¥–Ω—è—è –¥–≤–µ—Ä—å", subtitle: "–ü–æ—á—Ç–∏ –∫–æ–Ω–µ—Ü",
                text: "–ó–∞ –¥–≤–µ—Ä—å—é - –≤—ã—Ö–æ–¥ –∏–ª–∏ –ª–æ–≤—É—à–∫–∞? –ì–æ–ª–æ—Å –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –æ—Å—Ç–∞—Ç—å—Å—è. –ó–¥–µ—Å—å –±–µ–∑–æ–ø–∞—Å–Ω–æ...",
                choices: [
                    { text: "üö™ –û—Ç–∫—Ä—ã—Ç—å –¥–≤–µ—Ä—å", anxiety: 13, score: 75 },
                    { text: "üè† –û—Å—Ç–∞—Ç—å—Å—è", anxiety: 8, score: 45, safe: true },
                    { text: "üîì –í–∑–ª–æ–º–∞—Ç—å —Å–∏–ª–æ–π", anxiety: 22, score: 90, dangerous: true },
                    { text: "ü§î –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å", anxiety: 10, score: 65 }
                ]
            },
            {
                level: 10, title: "–§–∏–Ω–∞–ª", subtitle: "–ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ",
                text: "–≠—Ç–æ –±—ã–ª –≤–∞—à —Ä–∞–∑—É–º. –í—Å–µ —Å—Ç—Ä–∞—Ö–∏ - –≤–∞—à–∏. –ü—Ä–æ—Å–Ω—É—Ç—å—Å—è –∏–ª–∏ –æ—Å—Ç–∞—Ç—å—Å—è –≤ –≥–ª—É–±–∏–Ω–∞—Ö —Å–æ–∑–Ω–∞–Ω–∏—è?",
                choices: [
                    { text: "‚òÄÔ∏è –ü—Ä–æ—Å–Ω—É—Ç—å—Å—è", anxiety: 0, score: 100, safe: true },
                    { text: "üåô –û—Å—Ç–∞—Ç—å—Å—è", anxiety: 25, score: 95, dangerous: true },
                    { text: "‚ôæÔ∏è –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ", anxiety: 12, score: 85 },
                    { text: "üé≠ –ü—Ä–∏–Ω—è—Ç—å –æ–±–µ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏", anxiety: 20, score: 120, dangerous: true }
                ]
            }
        ],

        init() {
            this.updateUI();
        },

        startGame() {
            this.state = {
                currentLevel: 1,
                score: 0,
                anxiety: 0,
                decisions: 0,
                currentScenarioIndex: 0,
                gameActive: true
            };
            this.showScreen('game-screen');
            this.loadScenario();
        },

        loadScenario() {
            const scenario = this.scenarios[this.state.currentScenarioIndex];
            if (!scenario) {
                this.endGame();
                return;
            }

            document.getElementById('level-title').textContent = `–£—Ä–æ–≤–µ–Ω—å ${scenario.level}`;
            document.getElementById('level-subtitle').textContent = scenario.subtitle;
            document.getElementById('scenario-text').textContent = scenario.text;

            const progress = (this.state.currentScenarioIndex / this.scenarios.length) * 100;
            document.getElementById('progress-fill').style.width = progress + '%';

            const choicesContainer = document.getElementById('choices');
            choicesContainer.innerHTML = '';

            scenario.choices.forEach((choice, index) => {
                const choiceBtn = document.createElement('div');
                choiceBtn.className = 'choice' + (choice.dangerous ? ' dangerous' : choice.safe ? ' safe' : '');
                choiceBtn.textContent = choice.text;
                choiceBtn.onclick = () => this.makeChoice(choice);
                setTimeout(() => choicesContainer.appendChild(choiceBtn), index * 150);
            });

            this.updateUI();
        },

        makeChoice(choice) {
            this.state.score += choice.score;
            this.state.anxiety += choice.anxiety;
            this.state.decisions++;

            if (this.state.anxiety > 100) this.state.anxiety = 100;
            if (this.state.anxiety < 0) this.state.anxiety = 0;

            if (choice.dangerous) {
                document.getElementById('game-container').classList.add('shake');
                setTimeout(() => document.getElementById('game-container').classList.remove('shake'), 500);
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–≥—Ä—ã—à–∞
            if (this.state.anxiety >= 100) {
                setTimeout(() => this.endGame(true), 800);
                return;
            }

            this.updateUI();
            this.state.currentScenarioIndex++;
            this.state.currentLevel = this.state.currentScenarioIndex + 1;

            setTimeout(() => this.loadScenario(), 800);
        },

        updateUI() {
            document.getElementById('current-level').textContent = this.state.currentLevel;
            document.getElementById('score').textContent = this.state.score;
            document.getElementById('decisions').textContent = this.state.decisions;
            document.getElementById('anxiety-fill').style.width = this.state.anxiety + '%';

            const anxietyFill = document.getElementById('anxiety-fill');
            if (this.state.anxiety > 70) {
                anxietyFill.style.background = 'linear-gradient(90deg, #ff0000, #ff0066)';
            } else if (this.state.anxiety > 40) {
                anxietyFill.style.background = 'linear-gradient(90deg, #ffaa00, #ff6600)';
            } else {
                anxietyFill.style.background = 'linear-gradient(90deg, #00ff88, #ffaa00)';
            }
        },

        endGame(anxietyOverload = false) {
            this.state.gameActive = false;
            
            let resultTitle, resultMessage;
            
            if (anxietyOverload) {
                resultTitle = 'üò∞ –ü–æ–≥–ª–æ—â—ë–Ω —Å—Ç—Ä–∞—Ö–æ–º';
                resultMessage = '–¢—Ä–µ–≤–æ–≥–∞ –¥–æ—Å—Ç–∏–≥–ª–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è. –†–∞–∑—É–º –Ω–µ –≤—ã–¥–µ—Ä–∂–∞–ª –∏—Å–ø—ã—Ç–∞–Ω–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–±–∏—Ä–∞—Ç—å –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø—É—Ç–∏.';
            } else if (this.state.score > 700) {
                resultTitle = 'üèÜ –ú–∞—Å—Ç–µ—Ä —Å–æ–∑–Ω–∞–Ω–∏—è';
                resultMessage = '–ù–µ–≤–µ—Ä–æ—è—Ç–Ω–æ! –í—ã –ø—Ä–æ—à–ª–∏ –≤—Å–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è —Å –±–ª–µ—Å–∫–æ–º. –í–∞—à —Ä–∞–∑—É–º —Å–∏–ª—ë–Ω, —Ä–µ—à–µ–Ω–∏—è –º—É–¥—Ä—ã.';
            } else if (this.state.score > 500) {
                resultTitle = '‚≠ê –ò—Å–∫–∞—Ç–µ–ª—å –∏—Å—Ç–∏–Ω—ã';
                resultMessage = '–û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –í—ã –Ω–∞—à–ª–∏ –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é –∏ —Å–º–µ–ª–æ—Å—Ç—å—é.';
            } else if (this.state.score > 300) {
                resultTitle = 'üé≠ –í—ã–∂–∏–≤—à–∏–π';
                resultMessage = '–í—ã —Å–ø—Ä–∞–≤–∏–ª–∏—Å—å, –Ω–æ –ø—É—Ç—å –±—ã–ª –Ω–µ–ª—ë–≥–∫–∏–º. –°—Ç—Ä–∞—Ö–∏ –≤—Å—ë –µ—â—ë –ø—Ä–µ—Å–ª–µ–¥—É—é—Ç –≤–∞—Å.';
            } else {
                resultTitle = 'üå´Ô∏è –ü–æ—Ç–µ—Ä—è–Ω–Ω—ã–π';
                resultMessage = '–õ–∞–±–∏—Ä–∏–Ω—Ç —Ä–∞–∑—É–º–∞ –æ–∫–∞–∑–∞–ª—Å—è —Å–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω—ã–º. –ù–æ –∫–∞–∂–¥–∞—è –ø–æ–ø—ã—Ç–∫–∞ –¥–µ–ª–∞–µ—Ç –≤–∞—Å —Å–∏–ª—å–Ω–µ–µ!';
            }

            document.getElementById('result-title').textContent = resultTitle;
            document.getElementById('result-message').textContent = resultMessage;
            document.getElementById('final-score').textContent = this.state.score;
            document.getElementById('final-level').textContent = this.state.currentLevel;
            document.getElementById('final-decisions').textContent = this.state.decisions;
            document.getElementById('final-anxiety').textContent = Math.round(this.state.anxiety) + '%';

            this.showScreen('result-screen');
        },

        showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
        },

        restartGame() {
            this.startGame();
        },

        backToMenu() {
            this.showScreen('menu-screen');
        },

        showRules() {
            alert(`üéÆ –ü–†–ê–í–ò–õ–ê –ò–ì–†–´:
